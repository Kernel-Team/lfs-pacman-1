pkgname=acpica-unix
pkgver=20170303
pkgrel=1
pkgdesc="Group of software components that together create an implementation of the ACPI specification"
arch=('x86_64')
url="https://acpica.org"
license=('custom')
#depends=()
source=("https://acpica.org/sites/acpica/files/acpica-unix-${pkgver}.tar.gz")

prepare() {
	cd "${srcdir}/acpica-unix-${pkgver}/generate/unix"

	sed -i "/ifneq.*_APPLE/s#APPLE#LINUX#g" Makefile.config
	sed -i "/Werror/d" Makefile.config
}

build() {
	cd "${srcdir}/acpica-unix-${pkgver}/generate/unix"

	make CC="clang" HOST="_LINUX"
}

package() {
	cd "${srcdir}/acpica-unix-${pkgver}/generate/unix"

	make install DESTDIR="${pkgdir}"

	rm -rf "${pkgdir}/usr/bin/acpidump"
}

sha512sums=('efe4e59b10e297f65828f2f397082920d4f171c8847057514b2c3982e4fac111a55a932de41f01d4b54bc7ea1022d3feb682b8fc2c51878410898ea1b5f7602b')

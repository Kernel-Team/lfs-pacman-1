pkgname=at-spi2-atk
pkgver=2.25.3
pkgrel=1
pkgdesc="A GTK+ module that bridges ATK to D-Bus at-spi"
arch=('x86_64')
url="https://wiki.gnome.org/Accessibility"
license=('GPL2')
#depends=()
source=("https://download.gnome.org/sources/at-spi2-atk/${pkgver:0:4}/at-spi2-atk-${pkgver}.tar.xz"
	"adaptors-meson.build::https://git.gnome.org/browse/at-spi2-atk/plain/atk-adaptor/adaptors/meson.build"
	"dummyatk-meson.build::https://git.gnome.org/browse/at-spi2-atk/plain/tests/dummyatk/meson.build")

prepare() {
	install -v -dm755 "${srcdir}/build"

	install -v -Dm644 "${srcdir}/adaptors-meson.build" "${srcdir}/at-spi2-atk-${pkgver}/atk-adaptor/adaptors/meson.build"
	install -v -Dm644 "${srcdir}/dummyatk-meson.build" "${srcdir}/at-spi2-atk-${pkgver}/tests/dummyatk/meson.build"
}

build() {
	cd "${srcdir}/build"

	meson --prefix /usr \
		--sysconfdir /etc \
		--localstatedir /var \
		--buildtype=plain \
		"${srcdir}/at-spi2-atk-${pkgver}"

	ninja ${MAKEFLAGS}
}

package() {
	cd "${srcdir}/build"

	DESTDIR="${pkgdir}" ninja install
}

sha512sums=('5f1cea65fa3fab2018e4e741d9c0d636da22033914397cd07c11a87227efbae4051d5af669eea7c3f955c5cafe711ea5170190ec17ef23ab65aa276bce62732a'
            '11f390d25951699501373b0c3262ba0e70b3122bd79c8e6e60b2322f91b6daa5658a6ac8124310c9c9c4d1dbd33e37fa511590261bfc4170b133937ceb1e560a'
            '4c12292facb816dbdab554fa7077d5995f825494a35a8d08b46cea94b95d6186a4e9704c4ab256d308f5a26fc19ba3b2404356b228be19d7c1ce6b990a123a1f')

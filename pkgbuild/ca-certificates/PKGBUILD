pkgname=ca-certificates
pkgver=20190110
pkgrel=1
pkgdesc="Common CA certificates"
arch=('x86_64')
url="https://packages.debian.org/source/sid/ca-certificates"
license=('GPL2' 'MPL')
#depends=()
options=(emptydirs)
install=ca-certificates.install
source=("http://http.debian.net/debian/pool/main/c/ca-certificates/ca-certificates_${pkgver}.tar.xz")

build() {
	cd "${srcdir}/ca-certificates-${pkgver}"

	make -j1
}

package() {
	cd "${srcdir}/ca-certificates-${pkgver}"

	install -v -dm755 "${pkgdir}/etc/ca-certificates/update.d" \
		"${pkgdir}/etc/ssl/certs" \
		"${pkgdir}/usr/sbin" \
		"${pkgdir}/usr/share/ca-certificates"


	make -j1 install DESTDIR="${pkgdir}"

	install -v -Dm644 sbin/update-ca-certificates.8 \
		"${pkgdir}/usr/share/man/man8/update-ca-certificates.8"

(
echo "# Automatically generated by ca-certificates-${VER}"
echo "# see update-ca-certificates man page"
echo "# "
cd "${pkgdir}/usr/share/ca-certificates"
find . -name '*.crt' | sort | cut -b3-
) > "${pkgdir}/etc/ca-certificates.conf"
}

sha512sums=('9ce2661018edb120d0ef5bd3ed52c0f73f577d7607d135a31730549f5eb4176db4865cdb8bde77a78dc3efb8968846da5e72af8a833a9da2a8a7deb4f1560372')

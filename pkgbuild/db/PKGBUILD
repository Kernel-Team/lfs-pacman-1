pkgname=db
pkgver=6.2.32
pkgrel=1
pkgdesc="The Berkeley DB embedded database system"
arch=('x86_64')
url="http://www.oracle.com/technology/software/products/berkeley-db/index.html"
license=('custom')
#depends=()
source=("http://download.oracle.com/berkeley-db/db-${pkgver}.tar.gz"
	"db-clang.patch")


prepare() {
	cd "${srcdir}/db-${pkgver}"

	patch -Np1 -i "${srcdir}/db-clang.patch"
}

build() {
	cd "${srcdir}/db-${pkgver}/build_unix"

	../dist/configure --prefix=/usr \
		--enable-compat185 \
		--enable-cxx \
		--enable-dbm \
		--enable-stl \
		--enable-sql \
		--enable-tcl \
		--with-tcl=/usr/lib

	make
}

package() {
	cd "${srcdir}/db-${pkgver}/build_unix"

	make install DESTDIR="${pkgdir}"

	rm -rf "${pkgdir}/usr/docs"
}

md5sums=('33491b4756cb44b91c3318b727e71023'
         '3dff9f4b1796bd677978d149ce31f1a3')

pkgname=db
pkgver=18.1.25
pkgrel=1
pkgdesc="The Berkeley DB embedded database system"
arch=('x86_64')
url="http://www.oracle.com/technology/software/products/berkeley-db/index.html"
license=('custom')
#depends=()
source=("https://fossies.org/linux/misc/db-${pkgver}.tar.gz")

prepare() {
	cd "${srcdir}/db-${pkgver}"

	#patch -Np1 -i "${srcdir}/db-clang.patch"
}

build() {
	cd "${srcdir}/db-${pkgver}/build_unix"

	../dist/configure --prefix=/usr \
		--enable-compat185 \
		--enable-cxx \
		--enable-dbm \
		--enable-stl \
		--enable-sql \
		--enable-tcl \
		--with-tcl=/usr/lib

	make
}

package() {
	cd "${srcdir}/db-${pkgver}/build_unix"

	make install DESTDIR="${pkgdir}"

	rm -rf "${pkgdir}/usr/docs"
}

sha512sums=('30a0508dc7eb92adb56bdc881cedf179e901f888c776bc515b342ae585168521fa9f3c763f438d0e8a008e7cc779b3f40a7385285d724f8494d25d3652e6f1c9')

pkgname=evolution-ews
pkgver=3.27.92
pkgrel=1
pkgdesc="MS Exchange integration through Exchange Web Services"
arch=('x86_64')
url="https://wiki.gnome.org/Apps/Evolution/EWS"
license=('LGPL2.1')
#depends=()
source=("https://download.gnome.org/sources/evolution-ews/${pkgver:0:4}/evolution-ews-${pkgver}.tar.xz")

prepare() {
        install -v -dm755 "${srcdir}/build"
}

build() {
	cd "${srcdir}/build"

	export CXX="${CXX} -std=c++11"

	cmake -G Ninja \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_BUILD_TYPE=Release \
		-DSYSCONF_INSTALL_DIR=/etc \
		-DBUILD_TESTING=OFF \
		-DENABLE_SCHEMAS_COMPILE=OFF \
		-DWITH_MSPACK=OFF \
		"${srcdir}/evolution-ews-${pkgver}"

	ninja ${MAKEFLAGS}
}

package() {
	cd "${srcdir}/build"

	DESTDIR="${pkgdir}" ninja install
}

sha512sums=('aebd4b8ca8d45a7a858c5c5f4d646b74f414836280ba71fd00e491d37838edab1c746bdd33e87b78528ceb4da06cbcf2edcc40535983c052e7a9776e0792aa45')

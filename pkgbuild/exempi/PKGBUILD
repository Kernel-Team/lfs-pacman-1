pkgname=exempi
pkgver=2.4.3
pkgrel=1
pkgdesc="A library to parse XMP metadata"
arch=('x86_64')
url="https://libopenraw.freedesktop.org/wiki/Exempi"
license=('custom:BSD')
#depends=()
source=("https://libopenraw.freedesktop.org/download/exempi-${pkgver}.tar.bz2")

prepare() {
	cd "${srcdir}/exempi-${pkgver}"

	sed -i "s:tr1/memory:memory:g" XMPFiles/source/PluginHandler/ModuleUtils.h
	sed -i "s#std::tr1::shared_ptr#std::shared_ptr#g" XMPFiles/source/PluginHandler/PluginManager.h XMPFiles/source/PluginHandler/OS_Utils_Linux.cpp
}

build() {
	cd "${srcdir}/exempi-${pkgver}"

	export CXX="${CXX} -std=c++11"

	./configure --prefix=/usr

	make
}

package() {
	cd "${srcdir}/exempi-${pkgver}"

	make install DESTDIR="${pkgdir}"
}

sha512sums=('2378f30350d3c1ed0c563e8ffbf60e0c91b9fdd6a1a956f13c1bdddbb31a428609d7cc7972f8e0218162b07ea4cee9756138a46fbc9bea5247fa6c3d55c43abe')

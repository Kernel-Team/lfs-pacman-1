From 1159e9e967adf89036013db34928714b0cb98453 Mon Sep 17 00:00:00 2001
From: Philip Withnall <withnall@endlessm.com>
Date: Fri, 9 Feb 2018 19:01:45 +0000
Subject: [PATCH] build: Fix Meson checks for res_nclose() and res_ndestroy()
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The checks wouldnâ€™t compile, and hence would always fail.

Signed-off-by: Philip Withnall <withnall@endlessm.com>

https://bugzilla.gnome.org/show_bug.cgi?id=793291
---
 gio/meson.build | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/gio/meson.build b/gio/meson.build
index 1d61d235d..848851073 100644
--- a/gio/meson.build
+++ b/gio/meson.build
@@ -94,7 +94,8 @@ if host_system != 'windows'
                  #include <resolv.h>
                  int main (int argc, char ** argv) {
                    struct __res_state res;
-                   return res_nclose(&res);
+                   res_nclose(&res);
+                   return 0;
                  }''', args : network_args, name : 'res_nclose()')
     glib_conf.set('HAVE_RES_NCLOSE', 1)
   endif
@@ -106,7 +107,8 @@ if host_system != 'windows'
                  #include <resolv.h>
                  int main (int argc, char ** argv) {
                    struct __res_state res;
-                   return res_ndestroy(&res);
+                   res_ndestroy(&res);
+                   return 0;
                  }''', args : network_args, name : 'res_ndestroy()')
     glib_conf.set('HAVE_RES_NDESTROY', 1)
   endif
-- 
2.14.3
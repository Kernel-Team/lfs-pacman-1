pkgname=gst-plugins-bad
pkgver=1.13.90
pkgrel=1
pkgdesc="GStreamer Multimedia Framework Bad Plugins"
arch=('x86_64')
url="https://gstreamer.freedesktop.org/"
license=('LGPL')
#depends=()
source=("https://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-${pkgver}.tar.xz")

build() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	export CXX="${CXX} -std=c++11"

	sed -i "s#openjpeg-2.2/openjpeg.h#openjpeg-2.3/openjpeg.h#" ext/openjpeg/gstopenjpeg.h

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--libexecdir=/usr/lib \
		--with-package-name="GStreamer Bad Plugins ${pkgver} Krejzi" \
		--with-package-origin="https://github.com/elkrejzi/"

	make
}

package() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	make install DESTDIR="${pkgdir}"
}

sha512sums=('2438bb28c35450e8cba81c75a5855b7d41cd21d1c42cacd2ab70540dbc67e59537a79199bbb546567bd8691ede6b4288a442a9df9172aa4844e8fde49f7d740d')

pkgname=gst-plugins-bad
pkgver=1.12.3
pkgrel=1
pkgdesc="GStreamer Multimedia Framework Bad Plugins"
arch=('x86_64')
url="https://gstreamer.freedesktop.org/"
license=('LGPL')
#depends=()
source=("https://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-${pkgver}.tar.xz")

build() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	export CXX="${CXX} -std=c++11"

	sed -i "s#openjpeg-2.2/openjpeg.h#openjpeg-2.3/openjpeg.h#" ext/openjpeg/gstopenjpeg.h

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--libexecdir=/usr/lib \
		--with-package-name="GStreamer Bad Plugins ${pkgver} Krejzi" \
		--with-package-origin="https://github.com/elkrejzi/"

	make
}

package() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	make install DESTDIR="${pkgdir}"
}

sha512sums=('6df47381de3a2f4286d047c1e7de2c76dd4312c9806636e2012717282cde0f3e5b2d0ffa910c564c8e122b19363e842b663cce1eda7ae95a05d63d1dbbd52661')

pkgname=gst-plugins-bad
pkgver=1.14.0
pkgrel=1
pkgdesc="GStreamer Multimedia Framework Bad Plugins"
arch=('x86_64')
url="https://gstreamer.freedesktop.org/"
license=('LGPL')
#depends=()
source=("https://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-${pkgver}.tar.xz")

build() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	export CXX="${CXX} -std=c++11"

	sed -i "s#openjpeg-2.2/openjpeg.h#openjpeg-2.3/openjpeg.h#" ext/openjpeg/gstopenjpeg.h

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--libexecdir=/usr/lib \
		--with-package-name="GStreamer Bad Plugins ${pkgver} Krejzi" \
		--with-package-origin="https://github.com/elkrejzi/"

	make
}

package() {
	cd "${srcdir}/gst-plugins-bad-${pkgver}"

	make install DESTDIR="${pkgdir}"
}

sha512sums=('3f64dc428e2c1890f05d2c718215ff4b78a8262255ea61e746b436dc9ce1d3e0671db9cf3640f9a7453434297cac3a134272de7785818dfc5a6011ce8584842f')

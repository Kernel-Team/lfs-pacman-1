pkgname=libraw
pkgver=0.18.7
pkgrel=1
pkgdesc="A library for reading RAW files obtained from digital photo cameras (CRW/CR2, NEF, RAF, DNG, and others)"
arch=('x86_64')
url="http://www.libraw.org/"
license=('CDDL' 'LGPL')
#depends=()
source=("http://www.libraw.org/data/LibRaw-${pkgver}.tar.gz")

prepare() {
	cd "${srcdir}/LibRaw-${pkgver}"

	sed -i "s:-lstdc++::g" configure
	sed -i "s#powf64#dc_&#g" internal/dcraw_common.cpp
}

build() {
	cd "${srcdir}/LibRaw-${pkgver}"

	export CXX="${CXX} -std=c++03"

	./configure --prefix=/usr --disable-examples

	make
}

package() {
	cd "${srcdir}/LibRaw-${pkgver}"

	make install DESTDIR="${pkgdir}"
}

sha512sums=('5d906e69427d4f9edff8b3bc24eb85896e037dd98578cf07c668b96f6abd82bc8dd9f937ecbca6472d334c4cf8d8cbc8b07c2c84aba748e22ec55cecc6a4ed78')

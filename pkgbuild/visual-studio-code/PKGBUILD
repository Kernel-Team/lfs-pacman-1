pkgname=visual-studio-code
pkgver=1.21.0
pkgrel=1
pkgdesc="Editor for building and debugging modern web and cloud applications"
arch=('x86_64')
url="https://code.visualstudio.com/"
license=('custom: commercial')
#depends=()
options=(!strip)
source=("code_x64_${pkgver}.tar.gz::https://vscode-update.azurewebsites.net/${pkgver}/linux-x64/stable"
	"visual-studio-code.desktop")

package() {
	cd "${srcdir}/VSCode-linux-x64"

	install -v -dm755 "${pkgdir}/opt/visual-studio-code" "${pkgdir}/usr/bin"

	cp -a * "${pkgdir}/opt/visual-studio-code"

	install -v -Dm644 resources/app/resources/linux/code.png "${pkgdir}/usr/share/pixmaps/visual-studio-code.png"
	install -v -Dm644 "${srcdir}/visual-studio-code.desktop" "${pkgdir}/usr/share/applications/visual-studio-code.desktop"

	ln -sfv /opt/visual-studio-code/code "${pkgdir}/usr/bin/code"
}

sha512sums=('935edfc42ecf18feb3acea766593cda0a181431b87703ee016ccf5dfe687cf76b6a065f5be38bd7a67c84b5b0d6be750ae46000b54dff4c9a47e2f5dc1e9252d'
            'c69806fe7f00ef065b47a591382b61f27de6e510bcf83bbbc26fbb8ba930048d8edbc7c2af37b07f337c0dbd8444c550b5ac1272d23ebc0dd17bfc35a14fc3d2')

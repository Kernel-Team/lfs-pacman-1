pkgname=wireshark
pkgver=2.2.7
pkgrel=1
pkgdesc="A free network protocol analyzer for Unix/Linux and Windows"
arch=('x86_64')
url="https://www.wireshark.org/"
license=('GPL2')
#depends=()
source=("https://1.eu.dl.wireshark.org/src/wireshark-${pkgver}.tar.bz2"
	"wireshark.sysusers")

build() {
	cd "${srcdir}/wireshark-${pkgver}"

	./configure --prefix=/usr

	make
}

package() {
	cd "${srcdir}/wireshark-${pkgver}"

	make install DESTDIR="${pkgdir}"

	install -v -Dm644 "${srcdir}/wireshark.sysusers" "${pkgdir}/usr/lib/sysusers.d/wireshark.conf"

	chown 0:62 "${pkgdir}/usr/bin/tshark"
	chown 0:62 "${pkgdir}/usr/bin/dumpcap"
	chmod 6550 "${pkgdir}/usr/bin/tshark"
	chmod 6550 "${pkgdir}/usr/bin/dumpcap"
}

sha512sums=('417836810eb895b3f2a6ac1cfd138fb0275382ea2edc60fc5f5e5f8ce433b56b8120aa8b58b4f77296986630fdf49e4c5c3859b2c2c5e26b1ce0651393b7d716'
            'bdee1ea7d453df57fbb5d862feab5b5d6b3d770952bc7f5272e7a21ef434a861ff83620fb8361460381c54d6fa4bba1d7f0dc0b3a49cb0a4e765a863cceb75d4')

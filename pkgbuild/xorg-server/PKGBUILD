pkgname=xorg-server
pkgver=1.19.4
pkgrel=1
pkgdesc="Xorg X server"
arch=('x86_64')
url="https://www.x.org/wiki/"
license=('custom')
#depends=()
options=(emptydirs)
source=("https://www.x.org/releases/individual/xserver/xorg-server-${pkgver}.tar.bz2")

build() {
	cd "${srcdir}/xorg-server-${pkgver}"

	./configure --prefix=/usr \
		--sysconfdir=/etc \
		--localstatedir=/var \
		--disable-install-setuid \
		--enable-dri2 \
		--enable-dri3 \
		--enable-glamor \
		--enable-present \
		--enable-suid-wrapper \
		--enable-systemd-logind \
		--enable-xephyr \
		--enable-xnest \
		--enable-xvfb \
		--enable-xwayland \
		--with-systemd-daemon \
		--with-xkb-output=/var/lib/xkb

	make
}

package() {
	cd "${srcdir}/xorg-server-${pkgver}"

	make install DESTDIR="${pkgdir}"

	rm -rf "${pkgdir}/var/log"
	install -v -dm755 "${pkgdir}/etc/X11/xorg.conf.d"
}

sha512sums=('ff80934e42a7dd2d437e947fe02c74c3b25bdbb3002b7005191d52272d5eae8cb3a83377fa32f40000011be88405830e796f6bd3b914bd7fc163ea8ece76226b')
